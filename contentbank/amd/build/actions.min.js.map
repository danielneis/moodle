{"version":3,"file":"actions.min.js","sources":["../src/actions.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Module to manage content bank actions, such as delete or rename.\n *\n * @module     core_contentbank/actions\n * @copyright  2020 Sara Arjona <sara@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine([\n    'jquery',\n    'core/ajax',\n    'core/notification',\n    'core/str',\n    'core/templates',\n    'core/url',\n    'core/modal_factory',\n    'core/modal_events'],\nfunction($, Ajax, Notification, Str, Templates, Url, ModalFactory, ModalEvents) {\n\n    /**\n     * List of action selectors.\n     *\n     * @type {{DELETE_CONTENT: string}}\n     */\n    var ACTIONS = {\n        DELETE_CONTENT: '[data-action=\"deletecontent\"]',\n        RENAME_CONTENT: '[data-action=\"renamecontent\"]',\n        SET_CONTENT_VISIBILITY: '[data-action=\"setcontentvisibility\"]',\n        RESTORE_CONTENT: '[data-action=\"restorecontent\"]',\n        DELETE_CONTENT_FOREVER: '[data-action=\"deletecontentforever\"]',\n        COPY_CONTENT: '[data-action=\"copycontent\"]',\n    };\n\n    /**\n     * Actions class.\n     */\n    var Actions = function() {\n        this.registerEvents();\n    };\n\n    /**\n     * Register event listeners.\n     */\n    Actions.prototype.registerEvents = function() {\n        $(ACTIONS.DELETE_CONTENT).click(function(e) {\n            e.preventDefault();\n\n            var contentname = $(this).data('contentname');\n            var contentuses = $(this).data('uses');\n            var contentid = $(this).data('contentid');\n            var contextid = $(this).data('contextid');\n            var folderid = $(this).data('folderid');\n\n            var strings = [\n                {\n                    key: 'deletecontent',\n                    component: 'core_contentbank'\n                },\n                {\n                    key: 'deletecontentconfirm',\n                    component: 'core_contentbank',\n                    param: {\n                        name: contentname,\n                    }\n                },\n                {\n                    key: 'deletecontentconfirmlinked',\n                    component: 'core_contentbank',\n                },\n                {\n                    key: 'delete',\n                    component: 'core'\n                },\n            ];\n\n            var deleteButtonText = '';\n            Str.get_strings(strings).then(function(langStrings) {\n                var modalTitle = langStrings[0];\n                var modalContent = langStrings[1];\n                if (contentuses > 0) {\n                    modalContent += ' ' + langStrings[2];\n                }\n                deleteButtonText = langStrings[3];\n\n                return ModalFactory.create({\n                    title: modalTitle,\n                    body: modalContent,\n                    type: ModalFactory.types.SAVE_CANCEL,\n                    large: true\n                });\n            }).done(function(modal) {\n                modal.setSaveButtonText(deleteButtonText);\n                modal.getRoot().on(ModalEvents.save, function() {\n                    // The action is now confirmed, sending an action for it.\n                    return deleteContent(contentid, contextid, folderid);\n                });\n\n                // Handle hidden event.\n                modal.getRoot().on(ModalEvents.hidden, function() {\n                    // Destroy when hidden.\n                    modal.destroy();\n                });\n\n                // Show the modal.\n                modal.show();\n\n                return;\n            }).catch(Notification.exception);\n        });\n\n        $(ACTIONS.RENAME_CONTENT).click(function(e) {\n            e.preventDefault();\n\n            var contentname = $(this).data('contentname');\n            var contentid = $(this).data('contentid');\n\n            var strings = [\n                {\n                    key: 'renamecontent',\n                    component: 'core_contentbank'\n                },\n                {\n                    key: 'rename',\n                    component: 'core_contentbank'\n                },\n            ];\n\n            var saveButtonText = '';\n            Str.get_strings(strings).then(function(langStrings) {\n                var modalTitle = langStrings[0];\n                saveButtonText = langStrings[1];\n\n                return ModalFactory.create({\n                    title: modalTitle,\n                    body: Templates.render('core_contentbank/renamecontent', {'contentid': contentid, 'name': contentname}),\n                    type: ModalFactory.types.SAVE_CANCEL\n                });\n            }).then(function(modal) {\n                modal.setSaveButtonText(saveButtonText);\n                modal.getRoot().on(ModalEvents.save, function(e) {\n                    // The action is now confirmed, sending an action for it.\n                    var newname = $(\"#newname\").val().trim();\n                    if (newname) {\n                        renameContent(contentid, newname);\n                    } else {\n                        var errorStrings = [\n                            {\n                                key: 'error',\n                            },\n                            {\n                                key: 'emptynamenotallowed',\n                                component: 'core_contentbank',\n                            },\n                        ];\n                        Str.get_strings(errorStrings).then(function(langStrings) {\n                            Notification.alert(langStrings[0], langStrings[1]);\n                        }).catch(Notification.exception);\n                        e.preventDefault();\n                    }\n                });\n\n                // Handle hidden event.\n                modal.getRoot().on(ModalEvents.hidden, function() {\n                    // Destroy when hidden.\n                    modal.destroy();\n                });\n\n                // Show the modal.\n                modal.show();\n\n                return;\n            }).catch(Notification.exception);\n        });\n\n        $(ACTIONS.COPY_CONTENT).click(function(e) {\n            e.preventDefault();\n\n            var contentname = $(this).data('contentname');\n            var contentid = $(this).data('contentid');\n\n            var strings = [\n                {\n                    key: 'copycontent',\n                    component: 'core_contentbank'\n                },\n                {\n                    key: 'copy',\n                    component: 'moodle'\n                },\n            ];\n\n            var saveButtonText = '';\n            Str.get_strings(strings).then(function(langStrings) {\n                var modalTitle = langStrings[0];\n                saveButtonText = langStrings[1];\n\n                return ModalFactory.create({\n                    title: modalTitle,\n                    body: Templates.render('core_contentbank/copycontent', {'contentid': contentid, 'name': contentname}),\n                    type: ModalFactory.types.SAVE_CANCEL\n                });\n            }).then(function(modal) {\n                modal.setSaveButtonText(saveButtonText);\n                modal.getRoot().on(ModalEvents.save, function(e) {\n                    // The action is now confirmed, sending an action for it.\n                    var newname = $(\"#newname\").val().trim();\n                    if (newname) {\n                        copyContent(contentid, newname);\n                    } else {\n                        var errorStrings = [\n                            {\n                                key: 'error',\n                            },\n                            {\n                                key: 'emptynamenotallowed',\n                                component: 'core_contentbank',\n                            },\n                        ];\n                        Str.get_strings(errorStrings).then(function(langStrings) {\n                            Notification.alert(langStrings[0], langStrings[1]);\n                        }).catch(Notification.exception);\n                        e.preventDefault();\n                    }\n                });\n\n                // Handle hidden event.\n                modal.getRoot().on(ModalEvents.hidden, function() {\n                    // Destroy when hidden.\n                    modal.destroy();\n                });\n\n                // Show the modal.\n                modal.show();\n\n                return;\n            }).catch(Notification.exception);\n        });\n\n        $(ACTIONS.SET_CONTENT_VISIBILITY).click(function(e) {\n            e.preventDefault();\n\n            var contentid = $(this).data('contentid');\n            var visibility = $(this).data('visibility');\n\n            setContentVisibility(contentid, visibility);\n        });\n\n        $(ACTIONS.DELETE_CONTENT_FOREVER).click(function(e) {\n            e.preventDefault();\n\n            var contentname = $(this).data('contentname');\n            var contentuses = $(this).data('uses');\n            var contentid = $(this).data('contentid');\n            var contextid = $(this).data('contextid');\n\n            var strings = [\n                {\n                    key: 'deletecontentforever',\n                    component: 'core_contentbank'\n                },\n                {\n                    key: 'deletecontentforeverconfirm',\n                    component: 'core_contentbank',\n                    param: {\n                        name: contentname,\n                    }\n                },\n                {\n                    key: 'deletecontentconfirmlinked',\n                    component: 'core_contentbank',\n                },\n                {\n                    key: 'delete',\n                    component: 'core'\n                },\n            ];\n\n            var deleteButtonText = '';\n            Str.get_strings(strings).then(function(langStrings) {\n                var modalTitle = langStrings[0];\n                var modalContent = langStrings[1];\n                if (contentuses > 0) {\n                    modalContent += ' ' + langStrings[2];\n                }\n                deleteButtonText = langStrings[3];\n\n                return ModalFactory.create({\n                    title: modalTitle,\n                    body: modalContent,\n                    type: ModalFactory.types.SAVE_CANCEL,\n                    large: true\n                });\n            }).done(function(modal) {\n                modal.setSaveButtonText(deleteButtonText);\n                modal.getRoot().on(ModalEvents.save, function() {\n                    // The action is now confirmed, sending an action for it.\n                    return deleteContentForever(contentid, contextid);\n                });\n\n                // Handle hidden event.\n                modal.getRoot().on(ModalEvents.hidden, function() {\n                    // Destroy when hidden.\n                    modal.destroy();\n                });\n\n                // Show the modal.\n                modal.show();\n\n                return;\n            }).catch(Notification.exception);\n        });\n\n        $(ACTIONS.RESTORE_CONTENT).click(function(e) {\n            e.preventDefault();\n\n            var contentname = $(this).data('contentname');\n            var contentid = $(this).data('contentid');\n            var contextid = $(this).data('contextid');\n\n            var strings = [\n                {\n                    key: 'restorecontent',\n                    component: 'core_contentbank'\n                },\n                {\n                    key: 'restorecontentconfirm',\n                    component: 'core_contentbank',\n                    param: {\n                        name: contentname,\n                    }\n                },\n                {\n                    key: 'restore',\n                    component: 'core'\n                },\n            ];\n\n            var restoreButtonText = '';\n            Str.get_strings(strings).then(function(langStrings) {\n                var modalTitle = langStrings[0];\n                var modalContent = langStrings[1];\n                restoreButtonText = langStrings[2];\n\n                return ModalFactory.create({\n                    title: modalTitle,\n                    body: modalContent,\n                    type: ModalFactory.types.SAVE_CANCEL,\n                    large: true\n                });\n            }).done(function(modal) {\n                modal.setSaveButtonText(restoreButtonText);\n                modal.getRoot().on(ModalEvents.save, function() {\n                    // The action is now confirmed, sending an action for it.\n                    return restoreContent(contentid, contextid);\n                });\n\n                // Handle hidden event.\n                modal.getRoot().on(ModalEvents.hidden, function() {\n                    // Destroy when hidden.\n                    modal.destroy();\n                });\n\n                // Show the modal.\n                modal.show();\n\n                return;\n            }).catch(Notification.exception);\n        });\n    };\n\n    /**\n     * Delete content from the content bank.\n     *\n     * @param {int} contentid The content to delete.\n     * @param {int} contextid The contextid where the content belongs.\n     * @param {int} folderid The folderid where the content belongs.\n     */\n    function deleteContent(contentid, contextid, folderid) {\n        var request = {\n            methodname: 'core_contentbank_delete_content',\n            args: {\n                contentids: {contentid}\n            }\n        };\n\n        var requestType = 'success';\n        Ajax.call([request])[0].then(function(data) {\n            if (data.result) {\n                return 'contentdeleted';\n            }\n            requestType = 'error';\n            return 'contentnotdeleted';\n\n        }).done(function(message) {\n            var params = {\n                contextid: contextid,\n                folderid: folderid\n            };\n            if (requestType == 'success') {\n                params.statusmsg = message;\n            } else {\n                params.errormsg = message;\n            }\n            // Redirect to the main content bank page and display the message as a notification.\n            window.location.href = Url.relativeUrl('contentbank/index.php', params, false);\n        }).fail(Notification.exception);\n    }\n\n    /**\n     * Rename content in the content bank.\n     *\n     * @param {int} contentid The content to rename.\n     * @param {string} name The new name for the content.\n     */\n    function renameContent(contentid, name) {\n        var request = {\n            methodname: 'core_contentbank_rename_content',\n            args: {\n                contentid: contentid,\n                name: name\n            }\n        };\n        var requestType = 'success';\n        Ajax.call([request])[0].then(function(data) {\n            if (data.result) {\n                return 'contentrenamed';\n            }\n            requestType = 'error';\n            return data.warnings[0].message;\n\n        }).then(function(message) {\n            var params = null;\n            if (requestType == 'success') {\n                params = {\n                    id: contentid,\n                    statusmsg: message\n                };\n                // Redirect to the content view page and display the message as a notification.\n                window.location.href = Url.relativeUrl('contentbank/view.php', params, false);\n            } else {\n                // Fetch error notifications.\n                Notification.addNotification({\n                    message: message,\n                    type: 'error'\n                });\n                Notification.fetchNotifications();\n            }\n            return;\n        }).catch(Notification.exception);\n    }\n\n    /**\n     * Copy content in the content bank.\n     *\n     * @param {int} contentid The content to rename.\n     * @param {string} name The new name for the content.\n     */\n    function copyContent(contentid, name) {\n        var request = {\n            methodname: 'core_contentbank_copy_content',\n            args: {\n                contentid: contentid,\n                name: name\n            }\n        };\n        Ajax.call([request])[0].then(function(data) {\n            if (data.id == 0) {\n                // Fetch error notifications.\n                Notification.addNotification({\n                    message: data.warnings[0].message,\n                    type: 'error'\n                });\n                Notification.fetchNotifications();\n                return data.warnings[0].message;\n            } else {\n                let params = {\n                    id: data.id,\n                    statusmsg: 'contentcopied'\n                };\n                // Redirect to the content view page and display the message as a notification.\n                window.location.href = Url.relativeUrl('contentbank/view.php', params, false);\n            }\n        }).catch(Notification.exception);\n    }\n\n    /**\n     * Set content visibility in the content bank.\n     *\n     * @param {int} contentid The content to modify\n     * @param {int} visibility The new visibility value\n     */\n    function setContentVisibility(contentid, visibility) {\n        var request = {\n            methodname: 'core_contentbank_set_content_visibility',\n            args: {\n                contentid: contentid,\n                visibility: visibility\n            }\n        };\n        var requestType = 'success';\n        Ajax.call([request])[0].then(function(data) {\n            if (data.result) {\n                return 'contentvisibilitychanged';\n            }\n            requestType = 'error';\n            return data.warnings[0].message;\n\n        }).then(function(message) {\n            var params = null;\n            if (requestType == 'success') {\n                params = {\n                    id: contentid,\n                    statusmsg: message\n                };\n                // Redirect to the content view page and display the message as a notification.\n                window.location.href = Url.relativeUrl('contentbank/view.php', params, false);\n            } else {\n                // Fetch error notifications.\n                Notification.addNotification({\n                    message: message,\n                    type: 'error'\n                });\n                Notification.fetchNotifications();\n            }\n            return;\n        }).catch(Notification.exception);\n    }\n\n    /**\n     * Delete content forever from the content bank.\n     *\n     * @param {int} contentid The content to delete.\n     * @param {int} contextid The contextid where the content belongs.\n     */\n    function deleteContentForever(contentid, contextid) {\n        var request = {\n            methodname: 'core_contentbank_delete_content_forever',\n            args: {\n                contentids: {contentid}\n            }\n        };\n\n        var requestType = 'success';\n        Ajax.call([request])[0].then(function(data) {\n            if (data.result) {\n                return 'contentdeleted';\n            }\n            requestType = 'error';\n            return 'contentnotdeleted';\n\n        }).done(function(message) {\n            var params = {\n                contextid: contextid\n            };\n            if (requestType == 'success') {\n                params.statusmsg = message;\n            } else {\n                params.errormsg = message;\n            }\n            // Redirect to the main content bank page and display the message as a notification.\n            window.location.href = Url.relativeUrl('contentbank/trash.php', params, false);\n        }).fail(Notification.exception);\n    }\n\n    /**\n     * Restore content from the content bank's trash.\n     *\n     * @param {int} contentid The content to restore.\n     */\n    function restoreContent(contentid) {\n        var request = {\n            methodname: 'core_contentbank_restore_content',\n            args: {\n                contentids: {contentid}\n            }\n        };\n\n        var requestType = 'success';\n        Ajax.call([request])[0].then(function(data) {\n            if (data.result) {\n                return 'contentrestored';\n            }\n            requestType = 'error';\n            return 'contentnotrestored';\n\n        }).done(function(message) {\n            var params = {\n                id: contentid\n            };\n            if (requestType == 'success') {\n                params.statusmsg = message;\n            } else {\n                params.errormsg = message;\n            }\n            // Redirect to the main content bank page and display the message as a notification.\n            window.location.href = Url.relativeUrl('contentbank/view.php', params, false);\n        }).fail(Notification.exception);\n    }\n\n\n    return /** @alias module:core_contentbank/actions */ {\n        // Public variables and functions.\n\n        /**\n         * Initialise the contentbank actions.\n         *\n         * @method init\n         * @return {Actions}\n         */\n        'init': function() {\n            return new Actions();\n        }\n    };\n});\n"],"names":["define","$","Ajax","Notification","Str","Templates","Url","ModalFactory","ModalEvents","ACTIONS","Actions","registerEvents","prototype","click","e","preventDefault","contentname","this","data","contentuses","contentid","contextid","folderid","strings","key","component","param","name","deleteButtonText","get_strings","then","langStrings","modalTitle","modalContent","create","title","body","type","types","SAVE_CANCEL","large","done","modal","setSaveButtonText","getRoot","on","save","request","methodname","args","contentids","requestType","call","result","message","params","statusmsg","errormsg","window","location","href","relativeUrl","fail","exception","deleteContent","hidden","destroy","show","catch","saveButtonText","render","newname","val","trim","warnings","id","addNotification","fetchNotifications","renameContent","alert","copyContent","visibility","setContentVisibility","deleteContentForever","restoreButtonText","restoreContent"],"mappings":"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"}