{"version":3,"sources":["../src/delete_folder.js"],"names":["initModal","elementSelector","contextId","folderId","element","document","querySelector","addEventListener","e","preventDefault","ModalFactory","create","type","types","SAVE_CANCEL","title","body","then","modal","setSaveButtonText","root","getRoot","on","ModalEvents","save","Ajax","call","methodname","args","contextid","folderid","data","params","parentid","window","location","href","Url","relativeUrl","fail","Notification","exception","show"],"mappings":"uOAsBA,OACA,OACA,OACA,O,+DAUyB,QAAZA,CAAAA,SAAY,CAACC,CAAD,CAAkBC,CAAlB,CAA6BC,CAA7B,CAA0C,CAC/D,GAAMC,CAAAA,CAAO,CAAGC,QAAQ,CAACC,aAAT,CAAuBL,CAAvB,CAAhB,CACAG,CAAO,CAACG,gBAAR,CAAyB,OAAzB,CAAkC,SAASC,CAAT,CAAY,CAC1CA,CAAC,CAACC,cAAF,GACAC,UAAaC,MAAb,CAAoB,CAChBC,IAAI,CAAEF,UAAaG,KAAb,CAAmBC,WADT,CAEhBC,KAAK,CAAE,iBAAU,cAAV,CAA0B,aAA1B,CAFS,CAGhBC,IAAI,CAAG,iBAAU,qBAAV,CAAiC,aAAjC,CAHS,CAApB,EAKCC,IALD,CAKM,SAASC,CAAT,CAAgB,CAClBA,CAAK,CAACC,iBAAN,CAAwB,iBAAU,QAAV,CAAxB,EACA,GAAIC,CAAAA,CAAI,CAAGF,CAAK,CAACG,OAAN,EAAX,CACAD,CAAI,CAACE,EAAL,CAAQC,UAAYC,IAApB,CAA0B,UAAW,CAQjCC,UAAKC,IAAL,CAAU,CAPI,CACVC,UAAU,CAAE,gCADF,CAEVC,IAAI,CAAE,CACFC,SAAS,CAAE3B,CADT,CAEF4B,QAAQ,CAAE3B,CAFR,CAFI,CAOJ,CAAV,EAAqB,CAArB,EAAwBc,IAAxB,CAA6B,SAASc,CAAT,CAAe,CACxC,GAAIC,CAAAA,CAAM,CAAG,CACTF,QAAQ,CAAEC,CAAI,CAACE,QADN,CAETJ,SAAS,CAAE3B,CAFF,CAAb,CAIAgC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuBC,UAAIC,WAAJ,CAAgB,uBAAhB,CAAyCN,CAAzC,IAC1B,CAND,EAMGO,IANH,CAMQC,YAAY,CAACC,SANrB,CAOH,CAfD,EAgBAvB,CAAK,CAACwB,IAAN,EACH,CAzBD,CA0BH,CA5BD,CA6BH,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Module to manage content bank folder actions, such as create, delete or rename.\n *\n * @module     core_contentbank/folders\n * @copyright  2022 Daniel Neis Araujo <danielneis@gmail.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport Ajax from 'core/ajax';\nimport ModalFactory from 'core/modal_factory';\nimport ModalEvents from 'core/modal_events';\nimport Url from 'core/url';\nimport {get_string as getString} from 'core/str';\n\n/**\n * Initialize delete folder form as SAVE_CANCEL form.\n *\n * @param {String} elementSelector\n * @param {Integer} contextId\n * @param {Integer} folderId\n */\nexport const initModal = (elementSelector, contextId, folderId) => {\n    const element = document.querySelector(elementSelector);\n    element.addEventListener('click', function(e) {\n        e.preventDefault();\n        ModalFactory.create({\n            type: ModalFactory.types.SAVE_CANCEL,\n            title: getString('deletefolder', 'contentbank'),\n            body:  getString('deletefolderconfirm', 'contentbank'),\n        })\n        .then(function(modal) {\n            modal.setSaveButtonText(getString('delete'));\n            var root = modal.getRoot();\n            root.on(ModalEvents.save, function() {\n                var request = {\n                    methodname: 'core_contentbank_delete_folder',\n                    args: {\n                        contextid: contextId,\n                        folderid: folderId\n                    }\n                };\n                Ajax.call([request])[0].then(function(data) {\n                    let params = {\n                        folderid: data.parentid,\n                        contextid: contextId\n                    };\n                    window.location.href = Url.relativeUrl('contentbank/index.php', params, false);\n                }).fail(Notification.exception);\n            });\n            modal.show();\n        });\n    });\n};\n"],"file":"delete_folder.min.js"}