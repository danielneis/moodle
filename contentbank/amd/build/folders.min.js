define ("core_contentbank/folders",["jquery","core/ajax","core/notification","core/str","core/templates","core/url","core/modal_factory","core/modal_events"],function(a,b,c,d,e,f,g,h){var j={CREATE_FOLDER:"[data-action=\"createfolder\"]"},k=function(){this.registerEvents()};k.prototype.registerEvents=function(){a(j.CREATE_FOLDER).click(function(b){b.preventDefault();var f=a(this).data("parentid"),j="";d.get_strings([{key:"addnewfolder",component:"core_contentbank"},{key:"add",component:"core_contentbank"}]).then(function(a){var b=a[0];j=a[1];return g.create({title:b,body:e.render("core_contentbank/newfolder",{parentid:f}),type:g.types.SAVE_CANCEL})}).then(function(b){b.setSaveButtonText(j);b.getRoot().on(h.save,function(b){var c=a(b.currentTarget).find("#newname").val();return i(c,f)});b.getRoot().on(h.hidden,function(){b.destroy()});b.show()}).catch(c.exception)})};function i(a,e){var g="success";b.call([{methodname:"core_contentbank_create_folder",args:{name:a,parentid:e}}])[0].then(function(a){if(a){return d.get_string("foldercreated","core_contentbank")}g="error";return d.get_string("duplicatedfoldername","core_contentbank")}).then(function(a){var b=null;if("success"==g){b={parent:e}}else{b={parent:e,errormsg:a}}window.location.href=f.relativeUrl("contentbank/index.php",b,!1)}).catch(c.exception)}return{init:function init(){return new k}}});
//# sourceMappingURL=folders.min.js.map
