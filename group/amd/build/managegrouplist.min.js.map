{"version":3,"sources":["../src/managegrouplist.js"],"names":["checkSelectedGroups","groupList","deleteGroupSelector","modifyMembersSelector","isAnySelected","Array","from","options","some","element","selected","setDeleteButtonState","state","document","querySelector","disabled","setModifyButtonState","isDeletable","parseInt","dataset","isEditable","init","groupListSelector","addEventListener"],"mappings":"4IAuBMA,CAAAA,CAAmB,CAAG,SAACC,CAAD,CAAYC,CAAZ,CAAiCC,CAAjC,CAA2D,IAC7EC,CAAAA,CAAa,CAAGC,KAAK,CAACC,IAAN,CAAWL,CAAS,CAACM,OAArB,EAA8BC,IAA9B,CAAmC,SAAAC,CAAO,QAAIA,CAAAA,CAAO,CAACC,QAAZ,CAA1C,CAD6D,CAG7EC,CAAoB,CAAG,SAAAC,CAAK,CAAI,CAClCC,QAAQ,CAACC,aAAT,CAAuBZ,CAAvB,EAA4Ca,QAA5C,CAAuD,CAACH,CAC3D,CALkF,CAO7EI,CAAoB,CAAG,SAAAJ,CAAK,CAAI,CAClCC,QAAQ,CAACC,aAAT,CAAuBX,CAAvB,EAA8CY,QAA9C,CAAyD,CAACH,CAC7D,CATkF,CAWnF,GAAI,CAACR,CAAL,CAAoB,CAEhBO,CAAoB,IAApB,CACAK,CAAoB,IAApB,CAEA,MACH,CAjBkF,GAoB7EC,CAAAA,CAAW,CAAG,CAACZ,KAAK,CAACC,IAAN,CAAWL,CAAS,CAACM,OAArB,EAA8BC,IAA9B,CAAmC,SAAAC,CAAO,CAAI,CAC/D,GAAI,CAACA,CAAO,CAACC,QAAb,CAAuB,CACnB,QACH,CACD,MAAO,CAACQ,QAAQ,CAACT,CAAO,CAACU,OAAR,CAAgBF,WAAjB,CACnB,CALoB,CApB8D,CA4B7EG,CAAU,CAAG,CAACf,KAAK,CAACC,IAAN,CAAWL,CAAS,CAACM,OAArB,EAA8BC,IAA9B,CAAmC,SAAAC,CAAO,CAAI,CAC9D,GAAI,CAACA,CAAO,CAACC,QAAb,CAAuB,CACnB,QACH,CACD,MAAO,CAACQ,QAAQ,CAACT,CAAO,CAACU,OAAR,CAAgBC,UAAjB,CACnB,CALmB,CA5B+D,CAmCnFT,CAAoB,CAACM,CAAD,CAApB,CACAD,CAAoB,CAACI,CAAD,CACvB,C,QAEmB,QAAPC,CAAAA,IAAO,CAACC,CAAD,CAAoBpB,CAApB,CAAyCC,CAAzC,CAAmE,CACnF,GAAMF,CAAAA,CAAS,CAAGY,QAAQ,CAACC,aAAT,CAAuBQ,CAAvB,CAAlB,CAEAtB,CAAmB,CAACC,CAAD,CAAYC,CAAZ,CAAiCC,CAAjC,CAAnB,CACAF,CAAS,CAACsB,gBAAV,CAA2B,QAA3B,CAAqC,UAAM,CACvCvB,CAAmB,CAACC,CAAD,CAAYC,CAAZ,CAAiCC,CAAjC,CACtB,CAFD,CAGH,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Manage the group list.\n *\n * @module     core_group/managegrouplist\n * @copyright  2021 Andrew Nicols <andrew@nicols.co.uk>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nconst checkSelectedGroups = (groupList, deleteGroupSelector, modifyMembersSelector) => {\n    const isAnySelected = Array.from(groupList.options).some(element => element.selected);\n\n    const setDeleteButtonState = state => {\n        document.querySelector(deleteGroupSelector).disabled = !state;\n    };\n\n    const setModifyButtonState = state => {\n        document.querySelector(modifyMembersSelector).disabled = !state;\n    };\n\n    if (!isAnySelected) {\n        // If no group is selected, then disable both buttons.\n        setDeleteButtonState(false);\n        setModifyButtonState(false);\n\n        return;\n    }\n\n    // Check whether any selected element is deletable.\n    const isDeletable = !Array.from(groupList.options).some(element => {\n        if (!element.selected) {\n            return false;\n        }\n        return !parseInt(element.dataset.isDeletable);\n    });\n\n    // Check whether any selected element is editable.\n    const isEditable = !Array.from(groupList.options).some(element => {\n        if (!element.selected) {\n            return false;\n        }\n        return !parseInt(element.dataset.isEditable);\n    });\n\n    setDeleteButtonState(isDeletable);\n    setModifyButtonState(isEditable);\n};\n\nexport const init = (groupListSelector, deleteGroupSelector, modifyMembersSelector) => {\n    const groupList = document.querySelector(groupListSelector);\n\n    checkSelectedGroups(groupList, deleteGroupSelector, modifyMembersSelector);\n    groupList.addEventListener('change', () => {\n        checkSelectedGroups(groupList, deleteGroupSelector, modifyMembersSelector);\n    });\n};\n"],"file":"managegrouplist.min.js"}